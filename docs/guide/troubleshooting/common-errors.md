# 常见错误

本页面汇总了使用 DeepChat 时可能遇到的常见错误和问题，包括错误代码、问题描述、可能原因以及快速解决方法。

## 连接和 API 错误

### API 连接失败

| 错误代码 | 错误信息 | 可能原因 | 快速解决方法 |
|---------|---------|---------|------------|
| `ERR_API_CONNECT_001` | 无法连接到 API 服务 | 网络问题；API 服务宕机；DNS 解析错误 | 检查网络连接；确认 API 服务状态；尝试更换 DNS 服务器 |
| `ERR_API_AUTH_002` | API 身份验证失败 | API 密钥无效或过期；密钥格式错误 | 检查 API 密钥正确性；重新生成密钥；确认密钥格式 |
| `ERR_API_TIMEOUT_003` | API 请求超时 | 网络延迟高；服务器负载过重 | 检查网络速度；稍后重试；减少请求数据量 |
| `ERR_API_RATE_004` | 达到 API 速率限制 | 短时间内发送过多请求；账户配额限制 | 减少请求频率；升级 API 计划；实施请求队列 |

**详细说明：**

1. **无法连接到 API 服务**
   - **症状**：对话始终处于「正在思考...」状态，不返回结果
   - **检查项**：
     - 互联网连接是否稳定
     - API 服务提供商的状态页是否报告服务中断
     - 防火墙或网络策略是否阻止连接
   - **进阶排查**：使用 DeepChat 的连接测试工具或网络诊断工具检查连接

2. **API 身份验证失败**
   - **症状**：发送消息后立即收到错误提示
   - **检查项**：
     - API 密钥是否正确输入（无多余空格或换行）
     - 密钥是否已在服务提供商平台被禁用或删除
     - 是否有权限使用请求的特定模型
   - **常见错误**：将测试密钥用于生产环境；使用已撤销的密钥

3. **API 请求超时**
   - **症状**：对话开始后长时间无响应，最终返回超时错误
   - **影响因素**：
     - 网络连接质量
     - 请求内容大小
     - 服务器当前负载
   - **解决策略**：分割长输入；选择响应更快的模型；优化网络连接

4. **达到 API 速率限制**
   - **症状**：短时间发送多条消息后收到限制错误
   - **常见限制**：
     - OpenAI：根据套餐的 RPM（每分钟请求数）和 TPM（每分钟令牌数）限制
     - Claude：每分钟请求数和每天请求数限制
     - 其他服务：类似限制策略
   - **长期解决方案**：实施客户端请求节流；升级服务等级；使用多个 API 密钥轮换

### 模型特定错误

| 错误代码 | 错误信息 | 可能原因 | 快速解决方法 |
|---------|---------|---------|------------|
| `ERR_MODEL_UNAVAIL_101` | 请求的模型不可用 | 模型维护中；区域限制；权限不足 | 切换到其他可用模型；检查模型可用性；确认账户权限 |
| `ERR_MODEL_CONTEXT_102` | 超出上下文窗口限制 | 输入过长；历史对话累积过多 | 清理对话历史；使用较大上下文窗口模型；压缩提示内容 |
| `ERR_MODEL_OUTPUT_103` | 模型输出被过滤 | 内容违反使用政策；安全过滤触发 | 修改提示内容；调整提问方式；检查是否包含敏感内容 |
| `ERR_MODEL_PARAM_104` | 模型参数错误 | 无效的温度值；不支持的参数组合 | 使用默认参数；检查参数范围；参考API文档 |

**详细说明：**

1. **请求的模型不可用**
   - **常见场景**：
     - 服务提供商正在更新或维护模型
     - 某些区域或账户类型无法访问特定模型
     - 模型已停用或替换为新版本
   - **解决方案**：
     - 查看提供商的状态页了解维护计划
     - 考虑使用功能相似的替代模型
     - 检查您的账户是否有访问限制

2. **超出上下文窗口限制**
   - **模型限制参考**：
     - GPT-3.5-Turbo：4K/16K 令牌上下文窗口
     - GPT-4：8K/32K 令牌上下文窗口
     - Claude：100K-200K 令牌（根据版本不同）
     - Llama 系列：4K-128K 令牌（根据版本不同）
   - **优化策略**：
     - 启用智能上下文管理功能（设置→高级→上下文管理）
     - 定期总结长对话以减少令牌使用
     - 使用分段处理长文档

3. **模型输出被过滤**
   - **常见触发因素**：
     - 请求生成可能违反使用政策的内容
     - 涉及模型设计者定义的敏感主题
     - 包含潜在有害指令的提示
   - **规避方法**：
     - 重新表述请求，避免直接触发关键词
     - 明确表达合法、道德的使用意图
     - 设置适当的上下文和约束条件

4. **模型参数错误**
   - **常见参数问题**：
     - 温度设置超出有效范围（通常为 0-2）
     - 使用了模型不支持的特殊功能参数
     - 参数组合冲突（如同时设置 top_p 和 top_k 为非默认值）
   - **参数设置指南**：
     - 使用保守的参数设置（温度 0.3-0.7）
     - 检查最新 API 文档了解参数变更
     - 使用 DeepChat 内置的模型配置模板

## 应用程序错误

### 界面和交互错误

| 错误代码 | 错误信息 | 可能原因 | 快速解决方法 |
|---------|---------|---------|------------|
| `ERR_UI_RENDER_201` | 界面渲染错误 | 浏览器兼容性问题；资源加载失败 | 刷新页面；清除浏览器缓存；使用兼容浏览器 |
| `ERR_UI_INPUT_202` | 输入处理错误 | 特殊字符处理问题；输入过长 | 简化输入内容；避免特殊格式；分段输入 |
| `ERR_UI_ACTION_203` | 操作执行失败 | 功能冲突；资源不可用 | 重试操作；重新启动应用；检查权限 |
| `ERR_UI_SYNC_204` | 同步状态失败 | 网络连接问题；会话失效 | 检查网络连接；重新登录；恢复本地会话 |

**详细说明：**

1. **界面渲染错误**
   - **浏览器兼容性**：
     - 建议使用 Chrome、Edge、Firefox 或 Safari 的最新版本
     - 移动设备上某些高级功能可能受限
   - **常见解决方法**：
     - 清除浏览器缓存和 Cookie
     - 禁用影响网页渲染的浏览器扩展
     - 在无痕模式/隐私模式下尝试访问

2. **输入处理错误**
   - **触发因素**：
     - 粘贴包含复杂格式的文本
     - 输入非常长的内容（如整个文档）
     - 使用某些不常见的 Unicode 字符
   - **处理建议**：
     - 使用"粘贴为纯文本"功能
     - 分段提交长内容
     - 使用文件上传功能而非直接粘贴大量文本

3. **操作执行失败**
   - **常见场景**：
     - 尝试同时执行多个资源密集型操作
     - 在离线状态下使用需要网络的功能
     - 会话状态不一致导致操作冲突
   - **预防措施**：
     - 等待一个操作完成后再开始另一个
     - 定期保存重要内容
     - 注意网络连接状态指示器

4. **同步状态失败**
   - **可能原因**：
     - 多设备同时编辑同一对话
     - 长时间未活动导致会话过期
     - 服务器和客户端数据不一致
   - **恢复步骤**：
     - 保存本地更改到草稿
     - 刷新页面重新建立连接
     - 如需要，手动合并冲突的更改

### 数据和存储错误

| 错误代码 | 错误信息 | 可能原因 | 快速解决方法 |
|---------|---------|---------|------------|
| `ERR_DATA_SAVE_301` | 数据保存失败 | 存储空间不足；权限问题；数据损坏 | 清理存储空间；检查权限；修复数据库 |
| `ERR_DATA_LOAD_302` | 数据加载失败 | 数据格式错误；缺少必要文件；索引损坏 | 使用备份恢复；重置已损坏的数据；修复索引 |
| `ERR_DATA_SYNC_303` | 数据同步失败 | 网络问题；同步冲突；账户问题 | 解决冲突；检查网络连接；验证账户状态 |
| `ERR_DATA_MIGRATE_304` | 数据迁移错误 | 版本不兼容；迁移脚本失败 | 更新到兼容版本；手动导出导入数据；联系支持 |

**详细说明：**

1. **数据保存失败**
   - **存储限制**：
     - 浏览器版本：受本地存储限制（通常为 5-10MB）
     - 桌面版：受系统磁盘空间限制
     - 移动版：受应用存储配额限制
   - **解决方法**：
     - 导出并清理旧对话历史
     - 删除不再需要的大型文件附件
     - 检查应用存储权限设置

2. **数据加载失败**
   - **常见场景**：
     - 应用更新后数据格式变更
     - 导入不兼容格式的备份
     - 数据文件或索引部分损坏
   - **恢复策略**：
     - 使用「设置→数据管理→恢复」功能
     - 选择较早的自动备份点
     - 导入之前手动导出的备份文件

3. **数据同步失败**
   - **同步冲突类型**：
     - 合并冲突：多设备同时修改相同内容
     - 序列冲突：操作顺序不一致
     - 存储冲突：云端存储配额不足
   - **处理方法**：
     - 在同步设置中选择解决冲突的策略
     - 暂时禁用部分设备的同步功能
     - 手动选择保留哪个版本的数据

4. **数据迁移错误**
   - **版本升级问题**：
     - 从较早版本直接升级到最新版本
     - 跨平台迁移（如从网页版到桌面版）
     - 数据结构重大变更后的迁移
   - **安全迁移步骤**：
     - 在升级前完整备份所有数据
     - 考虑逐步升级（不要跨越多个主要版本）
     - 使用官方迁移工具而非手动操作

## 系统和性能错误

### 资源和性能问题

| 错误代码 | 错误信息 | 可能原因 | 快速解决方法 |
|---------|---------|---------|------------|
| `ERR_SYS_MEM_401` | 内存不足错误 | 大量对话同时打开；系统内存不足；内存泄漏 | 关闭不需要的对话；重启应用；增加系统内存 |
| `ERR_SYS_CPU_402` | CPU 使用率过高 | 复杂渲染任务；后台过程；系统过热 | 减少打开的功能；等待处理完成；检查系统冷却 |
| `ERR_SYS_STORAGE_403` | 存储空间不足 | 日志文件过大；缓存累积；系统磁盘已满 | 清理缓存；删除日志；增加存储空间 |
| `ERR_SYS_NETWORK_404` | 网络资源受限 | 带宽不足；网络拥塞；下载限制 | 降低网络使用；连接更快的网络；关闭其他网络应用 |

**详细说明：**

1. **内存不足错误**
   - **应用内存使用特点**：
     - 每个对话会话都占用内存缓存上下文
     - 图像和文件处理需要额外内存
     - 本地模型运行需要大量内存资源
   - **优化建议**：
     - 限制同时打开的对话数量
     - 定期重启应用释放内存
     - 在设置中降低内存使用限制

2. **CPU 使用率过高**
   - **高 CPU 使用场景**：
     - 本地运行大型语言模型
     - 处理和渲染长对话历史
     - 执行实时搜索和索引操作
   - **性能平衡策略**：
     - 禁用不必要的实时功能
     - 使用「轻量模式」减少动画和效果
     - 考虑使用云端而非本地模型处理

3. **存储空间不足**
   - **存储使用优化**：
     - 设置→高级→存储管理查看使用情况
     - 配置自动清理策略（如删除 30 天前的对话）
     - 使用云存储功能减轻本地存储负担
   - **手动清理重点**：
     - 导出并清理旧对话记录
     - 定期清理应用缓存
     - 删除已下载但不再使用的模型文件

4. **网络资源受限**
   - **带宽优化方法**：
     - 设置→网络→启用数据压缩
     - 配置低带宽模式（减少非必要加载）
     - 设置对话自动加载限制
   - **移动网络使用**：
     - 配置仅在 Wi-Fi 下同步媒体文件
     - 启用流量节省模式
     - 设置移动网络使用限制

### 初始化和启动错误

| 错误代码 | 错误信息 | 可能原因 | 快速解决方法 |
|---------|---------|---------|------------|
| `ERR_INIT_CONFIG_501` | 配置加载错误 | 配置文件损坏；权限问题；版本不兼容 | 重置配置；检查文件权限；更新应用版本 |
| `ERR_INIT_DEPEND_502` | 依赖项加载失败 | 缺少必要组件；版本冲突；网络问题 | 重新安装依赖；更新组件版本；检查网络连接 |
| `ERR_INIT_SERVICE_503` | 服务启动失败 | 端口被占用；权限不足；服务冲突 | 关闭冲突服务；以管理员权限运行；更改服务配置 |
| `ERR_INIT_DB_504` | 数据库初始化失败 | 数据库损坏；架构不兼容；磁盘错误 | 修复数据库；重置数据库；检查磁盘健康 |

**详细说明：**

1. **配置加载错误**
   - **手动重置配置**：
     - 桌面版：删除配置目录（见[日志查看](./logs.md)了解路径）
     - 浏览器版：清除站点数据（设置→隐私→清除浏览数据）
     - 移动版：应用设置→存储→清除数据
   - **注意事项**：
     - 重置配置会丢失自定义设置但不会删除对话数据
     - 建议先导出重要设置配置

2. **依赖项加载失败**
   - **常见依赖项问题**：
     - 网络环境无法下载所需资源
     - 第三方库版本冲突
     - 系统缺少必需组件
   - **解决方法**：
     - 尝试完全重新安装应用
     - 检查系统是否有最新更新
     - 确认防病毒软件未阻止必要组件

3. **服务启动失败**
   - **启动冲突检查**：
     - 检查其他应用是否占用 DeepChat 所需端口
     - 验证是否有多个 DeepChat 实例同时运行
     - 查看系统防火墙是否阻止应用联网
   - **服务恢复**：
     - 使用任务管理器结束所有相关进程
     - 以管理员权限重新启动应用
     - 尝试在命令行中启动并观察错误消息

4. **数据库初始化失败**
   - **数据库修复选项**：
     - 设置→高级→数据库→修复数据库
     - 尝试从最近的自动备份恢复
     - 在极端情况下考虑重置数据库（将丢失所有历史记录）
   - **预防措施**：
     - 定期导出重要对话
     - 启用自动备份功能
     - 避免在应用数据操作过程中强制关闭应用

## 第三方集成错误

| 错误代码 | 错误信息 | 可能原因 | 快速解决方法 |
|---------|---------|---------|------------|
| `ERR_INTEG_AUTH_601` | 第三方认证失败 | 凭证过期；权限被撤销；配置错误 | 重新授权；检查权限设置；更新集成配置 |
| `ERR_INTEG_API_602` | 第三方 API 错误 | API 版本不兼容；请求格式错误；服务限制 | 更新集成配置；格式化请求数据；检查服务状态 |
| `ERR_INTEG_PLUGIN_603` | 插件加载失败 | 插件版本过期；依赖缺失；冲突 | 更新插件；安装依赖；禁用冲突插件 |
| `ERR_INTEG_WEBHOOK_604` | Webhook 执行错误 | 端点无响应；格式不匹配；超时 | 验证端点状态；检查数据格式；延长超时设置 |

**详细说明：**

1. **第三方认证失败**
   - **常见集成服务**：
     - 谷歌云存储/Drive（备份和同步）
     - GitHub（代码片段和仓库集成）
     - 其他 AI 服务和工具（如 Notion、Slack 等）
   - **认证问题解决**：
     - 重新完成 OAuth 授权流程
     - 检查关联账户状态是否有效
     - 验证应用访问权限设置

2. **第三方 API 错误**
   - **API 集成故障场景**：
     - API 提供商更改了端点或参数要求
     - 超出 API 调用限制或配额
     - 请求格式或参数不符合 API 规范
   - **解决策略**：
     - 检查 API 文档了解最新要求
     - 监控 API 使用量避免超限
     - 使用测试端点验证请求格式

3. **插件加载失败**
   - **插件系统要求**：
     - 插件需与当前 DeepChat 版本兼容
     - 必要的依赖项需可访问
     - 插件之间不能有功能冲突
   - **管理步骤**：
     - 设置→插件→插件管理检查状态
     - 禁用所有插件，然后逐个启用测试
     - 确保从官方来源安装最新版本插件

4. **Webhook 执行错误**
   - **调试 Webhook**：
     - 使用 Webhook 测试工具验证端点
     - 检查负载格式和必要的头信息
     - 审查 Webhook 日志了解详细错误
   - **常见问题**：
     - 网络防火墙阻止外发连接
     - Webhook URL 配置错误
     - 接收端处理超时或处理错误

## 查看更多详细错误解析

如果您在上面的列表中没有找到您遇到的错误，或需要更详细的解决步骤，请参阅：

- **[解决方案](./solutions.md)** - 按问题类型分类的详细解决方案和步骤
- **[日志查看](./logs.md)** - 了解如何查看和解读应用日志来诊断复杂问题
- **[问题反馈](./feedback.md)** - 如何向开发团队有效地报告未解决的错误

如果您遇到反复出现的问题，或发现可能的 bug，请通过[GitHub 问题跟踪器](https://github.com/thinkinai/deepchat/issues)或[支持邮箱](mailto:support@deepchat.thinkinai.xyz)向我们报告。

![常见错误与解决方法](https://deepchat.thinkinai.xyz/chat-screenshot.png)

*这里应放置一张错误处理流程或错误码查询工具的截图。* 