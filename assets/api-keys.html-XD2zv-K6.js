import{_ as i,c as t,e,a as n,b as s,d as p,w as o,r,o as d}from"./app-dtLsz3BY.js";const u={};function c(h,l){const a=r("RouteLink");return d(),t("div",null,[l[3]||(l[3]=e(`<h1 id="api-密钥管理" tabindex="-1"><a class="header-anchor" href="#api-密钥管理"><span>API 密钥管理</span></a></h1><p>本页面将介绍如何在 DeepChat 中安全地管理和使用各种模型的 API 密钥，确保您的账户安全和数据隐私。</p><h2 id="api-密钥基础" tabindex="-1"><a class="header-anchor" href="#api-密钥基础"><span>API 密钥基础</span></a></h2><h3 id="什么是-api-密钥" tabindex="-1"><a class="header-anchor" href="#什么是-api-密钥"><span>什么是 API 密钥</span></a></h3><p>API 密钥是访问商业语言模型服务的凭证：</p><ul><li><strong>密钥作用</strong>：相当于您账户的密码，授权应用程序使用您的账户访问模型服务</li><li><strong>计费关联</strong>：使用 API 密钥的调用会计入您的账户，并产生相应费用</li><li><strong>访问控制</strong>：确定您可以访问哪些模型和功能</li></ul><h3 id="支持的-api-密钥类型" tabindex="-1"><a class="header-anchor" href="#支持的-api-密钥类型"><span>支持的 API 密钥类型</span></a></h3><p>DeepChat 支持多种模型服务的 API 密钥：</p><table><thead><tr><th>服务提供商</th><th>密钥格式</th><th>获取方式</th><th>费用模式</th></tr></thead><tbody><tr><td>OpenAI</td><td><code>sk-...</code></td><td>OpenAI 开发者平台</td><td>按使用量计费</td></tr><tr><td>Anthropic</td><td><code>sk-ant-...</code></td><td>Anthropic 控制台</td><td>按使用量计费</td></tr><tr><td>Google AI</td><td><code>AIza...</code></td><td>Google AI Studio</td><td>配额+按使用量计费</td></tr><tr><td>Azure OpenAI</td><td>多种凭证</td><td>Azure 门户</td><td>按部署资源计费</td></tr><tr><td>Cohere</td><td><code>...</code></td><td>Cohere 平台</td><td>按使用量+订阅</td></tr><tr><td>百度文心</td><td>API Key + Secret Key</td><td>百度智能云</td><td>按调用次数计费</td></tr><tr><td>阿里通义</td><td>API Key + Secret</td><td>阿里云</td><td>按调用次数计费</td></tr><tr><td>讯飞星火</td><td>App ID + API Key + Secret</td><td>讯飞开放平台</td><td>按调用次数计费</td></tr></tbody></table><h2 id="安全添加-api-密钥" tabindex="-1"><a class="header-anchor" href="#安全添加-api-密钥"><span>安全添加 API 密钥</span></a></h2><h3 id="添加新密钥" tabindex="-1"><a class="header-anchor" href="#添加新密钥"><span>添加新密钥</span></a></h3><p>将 API 密钥安全地添加到 DeepChat：</p><ol><li><p><strong>通过设置菜单</strong>：</p><ul><li>设置 → 模型 → API 密钥管理</li><li>点击&quot;添加新密钥&quot;</li><li>选择服务提供商</li><li>输入密钥信息</li><li>命名密钥（可选，便于管理多个密钥）</li></ul></li><li><p><strong>添加模型时</strong>：</p><ul><li>设置 → 模型 → 添加模型</li><li>选择模型提供商</li><li>系统会提示输入 API 密钥</li><li>选择&quot;保存此密钥&quot;以便重复使用</li></ul></li><li><p><strong>批量导入</strong>：</p><ul><li>设置 → 模型 → API 密钥 → 导入</li><li>上传符合格式的 JSON 文件</li><li>确认导入的密钥信息</li></ul></li></ol><p><img src="https://deepchat.thinkinai.xyz/chat-screenshot.png" alt="添加API密钥界面"></p><p><em>这里应放置一张添加API密钥的界面截图，显示密钥输入和配置选项。</em></p><h3 id="密钥存储安全" tabindex="-1"><a class="header-anchor" href="#密钥存储安全"><span>密钥存储安全</span></a></h3><p>DeepChat 如何保护您的 API 密钥：</p><ol><li><p><strong>本地加密存储</strong>：</p><ul><li>密钥使用强加密算法存储在本地</li><li>利用操作系统密钥链/钥匙串（可用时）</li><li>加密密钥不会明文存储在配置文件中</li></ul></li><li><p><strong>环境变量选项</strong>：</p><ul><li>支持从环境变量读取密钥</li><li>适用于团队和开发环境</li><li>设置格式：<code>DEEPCHAT_OPENAI_KEY</code>, <code>DEEPCHAT_ANTHROPIC_KEY</code> 等</li></ul></li><li><p><strong>配置文件选项</strong>：</p><ul><li>支持从外部配置文件读取</li><li>使用相对路径或绝对路径指定文件</li><li>文件权限建议设为仅所有者可读</li></ul></li></ol><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line"><span class="token comment">// 外部配置文件示例 (api_keys.json)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;openai&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;api_key&quot;</span><span class="token operator">:</span> <span class="token string">&quot;sk-xxxxxxxxxxxxxxxxxxxxxxxx&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;org_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;org-xxxxxxxxxxxxxxxx&quot;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;anthropic&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;api_key&quot;</span><span class="token operator">:</span> <span class="token string">&quot;sk-ant-xxxxxxxxxxxxxxxxxxxxxxxx&quot;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;google&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;api_key&quot;</span><span class="token operator">:</span> <span class="token string">&quot;AIzaxxxxxxxxxxxxxxxxxxxxxxxx&quot;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="api-密钥管理-1" tabindex="-1"><a class="header-anchor" href="#api-密钥管理-1"><span>API 密钥管理</span></a></h2><h3 id="密钥组织与标签" tabindex="-1"><a class="header-anchor" href="#密钥组织与标签"><span>密钥组织与标签</span></a></h3><p>管理多个 API 密钥的方法：</p><ol><li><p><strong>命名和标签</strong>：</p><ul><li>为每个密钥添加描述性名称</li><li>使用标签分类（如&quot;生产&quot;、&quot;测试&quot;、&quot;个人&quot;）</li><li>按项目或用途组织</li></ul></li><li><p><strong>多密钥管理</strong>：</p><ul><li>同一服务配置多个 API 密钥</li><li>设置密钥使用优先级</li><li>配置密钥切换规则</li></ul></li><li><p><strong>密钥分组</strong>：</p><ul><li>创建密钥组，用于特定场景</li><li>一键切换整组密钥</li><li>适用于团队或多项目管理</li></ul></li></ol><h3 id="使用限制与监控" tabindex="-1"><a class="header-anchor" href="#使用限制与监控"><span>使用限制与监控</span></a></h3><p>控制 API 密钥的使用：</p><ol><li><p><strong>使用限额</strong>：</p><ul><li>设置每日/每月使用限额</li><li>配置触发警告的阈值</li><li>可选自动禁用超限密钥</li></ul></li><li><p><strong>使用统计</strong>：</p><ul><li>跟踪每个密钥的调用次数</li><li>监控消耗的令牌数量</li><li>估算成本和费用</li></ul></li><li><p><strong>使用记录</strong>：</p><ul><li>记录每次 API 调用</li><li>按应用、会话或功能过滤</li><li>导出使用记录进行分析</li></ul></li></ol><h3 id="密钥轮换与过期" tabindex="-1"><a class="header-anchor" href="#密钥轮换与过期"><span>密钥轮换与过期</span></a></h3><p>维护密钥安全的最佳实践：</p><ol><li><p><strong>定期轮换</strong>：</p><ul><li>设置密钥轮换提醒</li><li>支持无缝更新密钥</li><li>保留旧密钥使用历史</li></ul></li><li><p><strong>过期管理</strong>：</p><ul><li>为密钥设置过期日期</li><li>接近过期时自动提醒</li><li>处理过期密钥的策略</li></ul></li><li><p><strong>密钥废弃</strong>：</p><ul><li>安全移除不再使用的密钥</li><li>保留使用历史和记录</li><li>确认服务商端撤销</li></ul></li></ol><h2 id="特定提供商设置" tabindex="-1"><a class="header-anchor" href="#特定提供商设置"><span>特定提供商设置</span></a></h2><h3 id="openai-设置" tabindex="-1"><a class="header-anchor" href="#openai-设置"><span>OpenAI 设置</span></a></h3><p>OpenAI API 密钥的特殊配置：</p><ol><li><p><strong>标准 API 与 Azure</strong>：</p><ul><li>切换标准 OpenAI API 和 Azure OpenAI</li><li>配置 Azure 特定参数（资源名称、部署ID）</li><li>区域和版本设置</li></ul></li><li><p><strong>组织设置</strong>：</p><ul><li>添加组织 ID（多组织账户）</li><li>配置默认组织</li><li>按项目分配组织</li></ul></li><li><p><strong>高级选项</strong>：</p><ul><li>配置基础 URL（代理或自托管）</li><li>设置请求超时</li><li>配置重试策略</li></ul></li></ol><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line"><span class="token comment">// OpenAI 完整配置示例</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;openai&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;api_key&quot;</span><span class="token operator">:</span> <span class="token string">&quot;sk-xxxxxxxxxxxxxxxxxxxxxxxx&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;org_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;org-xxxxxxxxxxxxxxxx&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;base_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://api.openai.com/v1&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;timeout&quot;</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;max_retries&quot;</span><span class="token operator">:</span> <span class="token number">3</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;azure_openai&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;api_key&quot;</span><span class="token operator">:</span> <span class="token string">&quot;xxxxxxxxxxxxxxxxxxxxxxxx&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;endpoint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://your-resource.openai.azure.com/&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;api_version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2023-12-01-preview&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;deployments&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;gpt4&quot;</span><span class="token operator">:</span> <span class="token string">&quot;your-gpt4-deployment&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;gpt35&quot;</span><span class="token operator">:</span> <span class="token string">&quot;your-gpt35-deployment&quot;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="anthropic-设置" tabindex="-1"><a class="header-anchor" href="#anthropic-设置"><span>Anthropic 设置</span></a></h3><p>Anthropic API 密钥的特殊配置：</p><ol><li><p><strong>区域设置</strong>：</p><ul><li>配置 API 区域（如有要求）</li><li>设置区域特定终结点</li><li>合规性设置</li></ul></li><li><p><strong>版本控制</strong>：</p><ul><li>选择 API 版本</li><li>标准 API 与企业 API 切换</li><li>设置模型版本偏好</li></ul></li><li><p><strong>使用限制</strong>：</p><ul><li>配置请求速率限制</li><li>设置并发请求限制</li><li>优先级设置（企业用户）</li></ul></li></ol><h3 id="国内模型服务设置" tabindex="-1"><a class="header-anchor" href="#国内模型服务设置"><span>国内模型服务设置</span></a></h3><p>百度、阿里等国内服务的特殊配置：</p><ol><li><p><strong>多重认证</strong>：</p><ul><li>配置 API Key 和 Secret Key</li><li>应用 ID 和访问令牌设置</li><li>签名生成配置</li></ul></li><li><p><strong>服务区域</strong>：</p><ul><li>选择服务区域和数据中心</li><li>配置专有网络选项</li><li>满足数据合规要求</li></ul></li><li><p><strong>计量和配额</strong>：</p><ul><li>查看剩余配额和使用量</li><li>配置预算警报</li><li>针对峰值使用的限流策略</li></ul></li></ol><h2 id="高级密钥管理" tabindex="-1"><a class="header-anchor" href="#高级密钥管理"><span>高级密钥管理</span></a></h2><h3 id="密钥访问控制" tabindex="-1"><a class="header-anchor" href="#密钥访问控制"><span>密钥访问控制</span></a></h3><p>限制 API 密钥使用权限：</p><ol><li><p><strong>用户权限</strong>：</p><ul><li>设置谁可以使用特定密钥</li><li>密钥使用需要额外验证（如密码）</li><li>用户组权限管理</li></ul></li><li><p><strong>功能限制</strong>：</p><ul><li>限制密钥可用于哪些功能</li><li>设置特定模型或参数的访问权限</li><li>隔离敏感操作的密钥</li></ul></li><li><p><strong>时间限制</strong>：</p><ul><li>设置密钥使用的时间窗口</li><li>非工作时间自动禁用</li><li>设置临时密钥有效期</li></ul></li></ol><h3 id="密钥备份与恢复" tabindex="-1"><a class="header-anchor" href="#密钥备份与恢复"><span>密钥备份与恢复</span></a></h3><p>保护密钥数据安全：</p><ol><li><p><strong>安全备份</strong>：</p><ul><li>加密导出所有密钥信息</li><li>设置备份密码保护</li><li>选择安全的备份位置</li></ul></li><li><p><strong>恢复选项</strong>：</p><ul><li>从备份文件恢复密钥</li><li>选择性恢复特定密钥</li><li>处理密钥冲突策略</li></ul></li><li><p><strong>设备间同步</strong>：</p><ul><li>配置多设备间密钥同步</li><li>确保同步数据加密</li><li>设备认证与授权</li></ul></li></ol><h2 id="最佳实践" tabindex="-1"><a class="header-anchor" href="#最佳实践"><span>最佳实践</span></a></h2><h3 id="安全建议" tabindex="-1"><a class="header-anchor" href="#安全建议"><span>安全建议</span></a></h3><p>保护 API 密钥的关键建议：</p><ol><li><p><strong>密钥安全原则</strong>：</p><ul><li>永不共享或泄露 API 密钥</li><li>不要将密钥硬编码到代码中</li><li>避免在不安全的通道传输密钥</li></ul></li><li><p><strong>访问限制</strong>：</p><ul><li>在服务提供商平台设置 IP 限制</li><li>设置使用量上限防止滥用</li><li>遵循最小权限原则</li></ul></li><li><p><strong>监控与审计</strong>：</p><ul><li>定期检查 API 使用情况</li><li>留意异常使用模式</li><li>设置使用通知和警报</li></ul></li></ol><h3 id="成本控制" tabindex="-1"><a class="header-anchor" href="#成本控制"><span>成本控制</span></a></h3><p>管理 API 使用成本的建议：</p><ol><li><p><strong>预算设置</strong>：</p><ul><li>设置每月预算限额</li><li>配置达到预算百分比的警报</li><li>可选自动禁用超出预算的服务</li></ul></li><li><p><strong>优化策略</strong>：</p><ul><li>为不同任务选择成本效益最佳的模型</li><li>缓存常见请求结果</li><li>优化提示和参数减少令牌使用</li></ul></li><li><p><strong>使用分析</strong>：</p><ul><li>识别高成本使用模式</li><li>按功能或用户分析成本</li><li>实施针对性的优化措施</li></ul></li></ol><h2 id="故障排除" tabindex="-1"><a class="header-anchor" href="#故障排除"><span>故障排除</span></a></h2><p>API 密钥相关问题的解决方案：</p><table><thead><tr><th>问题</th><th>可能原因</th><th>解决方案</th></tr></thead><tbody><tr><td>API 验证失败</td><td>密钥无效或过期；密钥格式错误</td><td>验证密钥正确性；在服务商平台重新生成密钥；检查有无空格或格式问题</td></tr><tr><td>配额超限</td><td>达到服务商设置的使用限制；账户余额不足</td><td>检查服务商控制台的限制和余额；请求提高限制；充值账户</td></tr><tr><td>密钥泄露</td><td>意外分享；代码或日志中暴露；安全漏洞</td><td>立即撤销并重新生成密钥；检查代码和日志；审查访问记录寻找可疑活动</td></tr><tr><td>区域访问问题</td><td>地理限制；网络问题；服务商区域设置</td><td>检查服务商区域配置；使用正确区域的端点；考虑网络代理或VPN</td></tr><tr><td>权限不足</td><td>API 密钥权限不足；账户级别限制</td><td>检查服务商平台的密钥权限设置；提升账户等级或权限；联系客户支持</td></tr></tbody></table><h2 id="企业密钥管理" tabindex="-1"><a class="header-anchor" href="#企业密钥管理"><span>企业密钥管理</span></a></h2><p>适用于团队和企业的高级密钥管理功能：</p><ol><li><p><strong>集中管理</strong>：</p><ul><li>通过管理控制台集中配置</li><li>统一部署和更新密钥</li><li>按部门或项目分配密钥</li></ul></li><li><p><strong>合规功能</strong>：</p><ul><li>详细的访问和使用日志</li><li>满足监管要求的审计跟踪</li><li>敏感操作的多因素认证</li></ul></li><li><p><strong>成本分摊</strong>：</p><ul><li>按部门或项目追踪使用成本</li><li>生成详细的使用报告</li><li>实施部门预算和限额</li></ul></li></ol>`,60)),n("p",null,[l[1]||(l[1]=s("下一步，您可以了解如何优化和监控模型")),p(a,{to:"/guide/model-integration/performance.html"},{default:o(()=>l[0]||(l[0]=[s("性能")])),_:1,__:[0]}),l[2]||(l[2]=s("，确保 AI 模型的高效使用。"))]),l[4]||(l[4]=n("p",null,[n("img",{src:"https://deepchat.thinkinai.xyz/chat-screenshot.png",alt:"API密钥管理概览"})],-1)),l[5]||(l[5]=n("p",null,[n("em",null,"这里应放置一张API密钥管理界面的截图，显示密钥列表、安全状态和使用情况。")],-1))])}const g=i(u,[["render",c]]),k=JSON.parse('{"path":"/guide/model-integration/api-keys.html","title":"API 密钥管理","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"API 密钥基础","slug":"api-密钥基础","link":"#api-密钥基础","children":[{"level":3,"title":"什么是 API 密钥","slug":"什么是-api-密钥","link":"#什么是-api-密钥","children":[]},{"level":3,"title":"支持的 API 密钥类型","slug":"支持的-api-密钥类型","link":"#支持的-api-密钥类型","children":[]}]},{"level":2,"title":"安全添加 API 密钥","slug":"安全添加-api-密钥","link":"#安全添加-api-密钥","children":[{"level":3,"title":"添加新密钥","slug":"添加新密钥","link":"#添加新密钥","children":[]},{"level":3,"title":"密钥存储安全","slug":"密钥存储安全","link":"#密钥存储安全","children":[]}]},{"level":2,"title":"API 密钥管理","slug":"api-密钥管理-1","link":"#api-密钥管理-1","children":[{"level":3,"title":"密钥组织与标签","slug":"密钥组织与标签","link":"#密钥组织与标签","children":[]},{"level":3,"title":"使用限制与监控","slug":"使用限制与监控","link":"#使用限制与监控","children":[]},{"level":3,"title":"密钥轮换与过期","slug":"密钥轮换与过期","link":"#密钥轮换与过期","children":[]}]},{"level":2,"title":"特定提供商设置","slug":"特定提供商设置","link":"#特定提供商设置","children":[{"level":3,"title":"OpenAI 设置","slug":"openai-设置","link":"#openai-设置","children":[]},{"level":3,"title":"Anthropic 设置","slug":"anthropic-设置","link":"#anthropic-设置","children":[]},{"level":3,"title":"国内模型服务设置","slug":"国内模型服务设置","link":"#国内模型服务设置","children":[]}]},{"level":2,"title":"高级密钥管理","slug":"高级密钥管理","link":"#高级密钥管理","children":[{"level":3,"title":"密钥访问控制","slug":"密钥访问控制","link":"#密钥访问控制","children":[]},{"level":3,"title":"密钥备份与恢复","slug":"密钥备份与恢复","link":"#密钥备份与恢复","children":[]}]},{"level":2,"title":"最佳实践","slug":"最佳实践","link":"#最佳实践","children":[{"level":3,"title":"安全建议","slug":"安全建议","link":"#安全建议","children":[]},{"level":3,"title":"成本控制","slug":"成本控制","link":"#成本控制","children":[]}]},{"level":2,"title":"故障排除","slug":"故障排除","link":"#故障排除","children":[]},{"level":2,"title":"企业密钥管理","slug":"企业密钥管理","link":"#企业密钥管理","children":[]}],"git":{"createdTime":1742921049000,"updatedTime":1742921049000,"contributors":[{"name":"袁鑫","email":"eric.yuanxin@gmail.com","commits":1}]},"filePathRelative":"guide/model-integration/api-keys.md"}');export{g as comp,k as data};
